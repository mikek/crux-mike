# Description: Spawns few php-cgi instances (a part of lighttpd)
# URL: http://www.lighttpd.net/
# Maintainer: Mikhail Kolesnik, mike at openbunker dot org
# Depends on: php-fcgi

name=spawn-fcgi-mod
version=1.4.21
release=1
source=(http://www.lighttpd.net/download/lighttpd-$version.tar.gz
	$name.rc $name.conf
	$name-limits.diff)

build() {
    cd lighttpd-$version
    patch -p1 -i $SRC/$name-limits.diff
    ./configure --prefix=/usr
    make -C src spawn-fcgi

    install -D -m 644 doc/spawn-fcgi.1 $PKG/usr/man/man1/$name.1
    install -D -m 755 src/spawn-fcgi $PKG/usr/bin/$name
    install -D -m 755 $SRC/$name.rc $PKG/etc/rc.d/spawn-fcgi
    install -D -m 644 $SRC/$name.conf $PKG/etc/spawn-fcgi.conf
}
