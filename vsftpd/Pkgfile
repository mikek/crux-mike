# Description: Probably the most secure and fastest FTP server
# URL: http://vsftpd.beasts.org
# Maintainer: Mikhail Kolesnik, mike at openbunker dot org
# Depends on: openssl

# juergen dot daubert at t-online dot de's ports were templates

name=vsftpd
version=2.0.6
release=1
source=(ftp://vsftpd.beasts.org/users/cevans/$name-$version.tar.gz \
		$name-config.patch $name-syscall.patch vsftpd)

build () {
	cd $name-$version
	patch -p1 -i $SRC/$name-config.patch
	patch -p1 -i $SRC/$name-syscall.patch
	make
	make DESTDIR=$PKG install

	install -d $PKG/{etc/{rc.d,ssl/{certs,keys}},var/log,srv/ftp/$name}
	install -m 755 $SRC/vsftpd $PKG/etc/rc.d
	touch $PKG/etc/ssl/{certs/$name.crt,keys/$name.key}
	chmod 600 $PKG/etc/ssl/{certs/$name.crt,keys/$name.key}
	touch $PKG/var/log/$name.log
}
