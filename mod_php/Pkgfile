# Description: PHP5 module for the apache 2.2.x HTTP server  
# URL: http://www.php.net
# Maintainer: Mikhail Kolesnik, mike at openbunker dot org
# Depends on: mysql apache libxml2 openssl libgd

# juergen dot daubert at t-online dot de's ports were templates

name=mod_php
version=5.2.5
release=2
source=(http://www.php.net/distributions/php-$version.tar.bz2) 

build () {
cd php-$version
	sed -i "s/-i -a/-i/" configure
	./configure --prefix=/usr \
				--with-apxs2=/usr/sbin/apxs \
				--with-config-file-path=/etc \
				--enable-fastcgi \
				--without-pear \
				--with-mysql=/usr \
				--with-zlib-dir=/usr/lib \
				--with-openssl=/usr \
				--enable-ftp \
				--with-openssl-dir=/usr \
				--with-bz2 \
				--with-gettext \
				--with-gd=/usr \
				--enable-gd-native-ttf \
				--with-freetype-dir=/usr \
				--enable-mbstring \
				--enable-bcmath \
				--disable-pdo \
				--with-curl
	make
	make INSTALL_ROOT=$PKG install
	rm -r $PKG/etc/apache
	rm -rf $PKG/usr/lib/php/doc
	sed -i "/^extension_dir/s|\./|/usr/lib/php/extensions|" php.ini-dist
	install -D -m 644 php.ini-dist $PKG/etc/php.ini
}
